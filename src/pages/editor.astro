---
import Layout from '../layouts/Layout.astro';

const seoConfig = {
  title: "Editor de Posts - Ajedrez FAMAF",
  description: "Panel de edición de posts para el editor",
};
---

<Layout title={seoConfig.title} description={seoConfig.description}>
  <div class="min-h-screen bg-gray-50 flex flex-col">
    <!-- Header -->
    <header class="bg-gray-900 border-b border-gray-700">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <a href="/" class="flex items-center space-x-3">
            <img
              src="/ajedrezfamaf.jpg"
              alt="Ajedrez FAMAF"
              class="w-10 h-10 rounded-full"
            />
            <h1 class="text-xl font-bold text-white">Ajedrez FAMAF - Editor</h1>
          </a>
          <a
            href="/"
            class="text-gray-400 hover:text-white transition-colors"
          >
            Volver al sitio
          </a>
        </div>
      </div>
    </header>

    <main class="flex-1">
      <!-- Login Section -->
      <section class="py-16">
        <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
          <div class="bg-white shadow-lg rounded-lg p-8">
            <div class="text-center mb-8">
              <h2 class="text-2xl font-bold text-gray-900 mb-2">
                Acceso de Editor
              </h2>
              <p class="text-gray-600">
                Ingresa tu contraseña para editar posts
              </p>
            </div>

            <form id="editor-login-form" class="space-y-6">
              <div>
                <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                  Contraseña de Editor
                </label>
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Ingresa tu contraseña de editor"
                />
              </div>

              <button
                type="submit"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"
              >
                Ingresar como Editor
              </button>
            </form>

            <div id="error-message" class="mt-4 text-red-600 text-sm hidden">
              Contraseña incorrecta. Intenta nuevamente.
            </div>
          </div>
        </div>
      </section>

      <!-- Editor Panel (Hidden by default) -->
      <section id="editor-panel" class="hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          
          <!-- Navigation Tabs -->
          <div class="mb-8">
            <nav class="flex space-x-8">
              <button
                id="tab-posts"
                class="tab-button active py-2 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600"
              >
                Posts
              </button>
              <button
                id="tab-history"
                class="tab-button py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700"
              >
                Historial de Cambios
              </button>
            </nav>
          </div>

          <!-- Posts Tab -->
          <div id="content-posts" class="tab-content">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-2xl font-bold text-gray-900">
                Gestión de Posts
              </h3>
              <button
                id="create-post-btn"
                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"
              >
                Crear Nuevo Post
              </button>
            </div>

            <!-- Posts List -->
            <div class="bg-white shadow overflow-hidden sm:rounded-md">
              <div class="px-4 py-5 sm:p-6">
                <div class="space-y-4">
                  <!-- Mock Post 1 -->
                  <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <h4 class="text-lg font-semibold text-gray-900 mb-2">
                          Torneo de Septiembre 2022
                        </h4>
                        <p class="text-gray-600 text-sm mb-2">
                          Creado: 22 de septiembre, 2022
                        </p>
                        <p class="text-gray-500 text-sm">
                          Primer torneo del taller de ajedrez de FAMAF...
                        </p>
                      </div>
                      <div class="flex space-x-2 ml-4">
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                          Editar
                        </button>
                        <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                          Ver
                        </button>
                      </div>
                    </div>
                  </div>

                  <!-- Mock Post 2 -->
                  <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <h4 class="text-lg font-semibold text-gray-900 mb-2">
                          Torneo de Agosto 2022
                        </h4>
                        <p class="text-gray-600 text-sm mb-2">
                          Creado: 22 de agosto, 2022
                        </p>
                        <p class="text-gray-500 text-sm">
                          Segundo torneo del taller con mayor participación...
                        </p>
                      </div>
                      <div class="flex space-x-2 ml-4">
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                          Editar
                        </button>
                        <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                          Ver
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- History Tab -->
          <div id="content-history" class="tab-content hidden">
            <div class="mb-6">
              <h3 class="text-2xl font-bold text-gray-900">
                Historial de Cambios
              </h3>
            </div>

            <!-- History List -->
            <div class="bg-white shadow overflow-hidden sm:rounded-md">
              <div class="px-4 py-5 sm:p-6">
                <div class="space-y-4">
                  <!-- Mock History Entry 1 -->
                  <div class="border-l-4 border-blue-500 pl-4">
                    <div class="flex justify-between items-start">
                      <div>
                        <h4 class="text-lg font-semibold text-gray-900">
                          Post "Torneo de Septiembre 2022" editado
                        </h4>
                        <p class="text-gray-600 text-sm">
                          Editor: admin • Fecha: 23 de septiembre, 2022 - 14:30
                        </p>
                        <p class="text-gray-500 text-sm mt-1">
                          Se actualizó la información de participantes y resultados
                        </p>
                      </div>
                      <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                        Ver Cambios
                      </button>
                    </div>
                  </div>

                  <!-- Mock History Entry 2 -->
                  <div class="border-l-4 border-green-500 pl-4">
                    <div class="flex justify-between items-start">
                      <div>
                        <h4 class="text-lg font-semibold text-gray-900">
                          Nuevo post creado: "Torneo de Agosto 2022"
                        </h4>
                        <p class="text-gray-600 text-sm">
                          Editor: admin • Fecha: 22 de agosto, 2022 - 16:45
                        </p>
                        <p class="text-gray-500 text-sm mt-1">
                          Post creado con información del segundo torneo
                        </p>
                      </div>
                      <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                        Ver Post
                      </button>
                    </div>
                  </div>

                  <!-- Mock History Entry 3 -->
                  <div class="border-l-4 border-yellow-500 pl-4">
                    <div class="flex justify-between items-start">
                      <div>
                        <h4 class="text-lg font-semibold text-gray-900">
                          Post "Vuelven las clases del taller" actualizado
                        </h4>
                        <p class="text-gray-600 text-sm">
                          Editor: editor • Fecha: 20 de agosto, 2022 - 10:15
                        </p>
                        <p class="text-gray-500 text-sm mt-1">
                          Se agregó información sobre horarios y ubicación
                        </p>
                      </div>
                      <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                        Ver Cambios
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-700 py-8 mt-auto">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center">
          <a
            class="inline-flex items-center text-gray-300 hover:text-white transition-all text-lg"
            href="https://gonza.gr"
            target="_blank"
            rel="noopener noreferrer"
          >
            💻 🧉 Desarrollado por Gonza
          </a>
          <span class="text-gray-300 text-lg">
            Córdoba, Argentina 🇦🇷
          </span>
        </div>
      </div>
    </footer>
  </div>
</Layout>

<script define:vars={{ 
  EDITOR_PASSWORD: process.env.CHESS_EDITOR_PASSWORD || 'editor123'
}}>
  // Editor authentication
  
  document.getElementById('editor-login-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const password = document.getElementById('password').value;
    const errorMessage = document.getElementById('error-message');
    const editorPanel = document.getElementById('editor-panel');
    
    if (password === EDITOR_PASSWORD) {
      editorPanel.classList.remove('hidden');
      this.closest('section').classList.add('hidden');
    } else {
      errorMessage.classList.remove('hidden');
      setTimeout(() => {
        errorMessage.classList.add('hidden');
      }, 3000);
    }
  });

  // Tab functionality
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  tabButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Remove active class from all buttons
      tabButtons.forEach(btn => {
        btn.classList.remove('active', 'border-blue-500', 'text-blue-600');
        btn.classList.add('border-transparent', 'text-gray-500');
      });
      
      // Add active class to clicked button
      this.classList.add('active', 'border-blue-500', 'text-blue-600');
      this.classList.remove('border-transparent', 'text-gray-500');
      
      // Hide all tab contents
      tabContents.forEach(content => {
        content.classList.add('hidden');
      });
      
      // Show corresponding tab content
      const tabId = this.id.replace('tab-', 'content-');
      document.getElementById(tabId).classList.remove('hidden');
    });
  });

  // Create post functionality
  document.getElementById('create-post-btn').addEventListener('click', function() {
    alert('Funcionalidad de crear post - pendiente de implementar con base de datos');
  });
</script>

<style>
  .tab-button.active {
    @apply border-blue-500 text-blue-600;
  }
</style>
